<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ontario Real Estate Professional Platform - Advanced Edition</title>
    <style>
        /* =============================================== */
        /* REDESIGNED PLATFORM WITH ADVANCED FILTERING    */
        /* Modern UX/UI with Comprehensive Filter System  */
        /* =============================================== */

        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1e40af;
            --secondary: #64748b;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --info: #0891b2;

            /* Category Colors */
            --residential: #16a34a;
            --commercial: #8b5cf6;
            --rental: #0891b2;
            --referral: #f59e0b;
            --universal: #6b7280;

            /* Modern Design System */
            --surface: #ffffff;
            --surface-elevated: #f8fafc;
            --surface-overlay: #f1f5f9;
            --surface-muted: #e2e8f0;
            --border: #cbd5e1;
            --border-light: #e2e8f0;
            --text: #0f172a;
            --text-muted: #475569;
            --text-light: #64748b;

            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;

            /* Typography */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;

            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

            /* Border Radius */
            --radius-sm: 0.375rem;
            --radius-base: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
        }

        /* Dark Theme */
        [data-theme="dark"] {
            --surface: #0f172a;
            --surface-elevated: #1e293b;
            --surface-overlay: #334155;
            --surface-muted: #475569;
            --border: #475569;
            --border-light: #334155;
            --text: #f8fafc;
            --text-muted: #cbd5e1;
            --text-light: #94a3b8;
        }

        /* Reset & Base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Inter, sans-serif;
            background-color: var(--surface-elevated);
            color: var(--text);
            line-height: 1.5;
            font-size: var(--text-base);
        }

        /* ====================== */
        /* MODERN LAYOUT SYSTEM   */
        /* ====================== */

        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Top Navigation Bar */
        .top-nav {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: var(--space-4) var(--space-6);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .nav-brand h1 {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--primary);
        }

        .nav-brand p {
            font-size: var(--text-sm);
            color: var(--text-muted);
            font-weight: 500;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        /* Main Content Area */
        .main-content {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--surface);
            border-right: 1px solid var(--border);
            padding: var(--space-6);
            overflow-y: auto;
            max-height: calc(100vh - 100px);
        }

        .sidebar-section {
            margin-bottom: var(--space-8);
        }

        .sidebar-title {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-4);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: var(--space-1);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-4);
            color: var(--text-muted);
            text-decoration: none;
            border-radius: var(--radius-base);
            font-size: var(--text-sm);
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
        }

        .nav-link:hover {
            background: var(--surface-overlay);
            color: var(--text);
        }

        .nav-link.active {
            background: var(--primary);
            color: white;
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: var(--space-6);
            overflow-y: auto;
        }

        /* ========================= */
        /* ADVANCED FILTER SYSTEM    */
        /* ========================= */

        .filter-toolbar {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
            box-shadow: var(--shadow-base);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .filter-label {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text);
        }

        .filter-select,
        .filter-input {
            padding: var(--space-3) var(--space-4);
            border: 1px solid var(--border);
            border-radius: var(--radius-base);
            background: var(--surface);
            color: var(--text);
            font-size: var(--text-sm);
            transition: all 0.2s ease;
        }

        .filter-select:focus,
        .filter-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .filter-checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-3);
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .filter-checkbox input {
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
        }

        .filter-checkbox label {
            font-size: var(--text-sm);
            color: var(--text-muted);
            cursor: pointer;
        }

        .filter-actions {
            display: flex;
            gap: var(--space-3);
        }

        /* Search Bar */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: var(--space-3) var(--space-4) var(--space-3) var(--space-10);
            border: 1px solid var(--border);
            border-radius: var(--radius-base);
            background: var(--surface);
            color: var(--text);
            font-size: var(--text-sm);
        }

        .search-icon {
            position: absolute;
            left: var(--space-3);
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            color: var(--text-light);
        }

        /* Active Filters */
        .active-filters {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
            margin-top: var(--space-4);
        }

        .filter-tag {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-1) var(--space-3);
            background: var(--primary);
            color: white;
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: 500;
        }

        .filter-tag-remove {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .filter-tag-remove:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Results Header */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
        }

        .results-count {
            font-size: var(--text-sm);
            color: var(--text-muted);
        }

        .view-toggle {
            display: flex;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-base);
            overflow: hidden;
        }

        .view-toggle button {
            padding: var(--space-2) var(--space-4);
            border: none;
            background: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: var(--text-sm);
            transition: all 0.2s ease;
        }

        .view-toggle button.active {
            background: var(--primary);
            color: white;
        }

        /* =================== */
        /* CONTENT LAYOUTS     */
        /* =================== */

        /* Grid View */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--space-6);
        }

        /* List View */
        .content-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }

        /* Table View */
        .content-table {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: var(--surface-overlay);
            padding: var(--space-4);
            text-align: left;
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text);
            border-bottom: 1px solid var(--border);
        }

        .table td {
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
            font-size: var(--text-sm);
            color: var(--text-muted);
        }

        .table tr:hover {
            background: var(--surface-elevated);
        }

        /* Cards */
        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow-base);
            transition: all 0.2s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: var(--space-4);
            gap: var(--space-4);
        }

        .card-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-2);
        }

        .card-subtitle {
            font-size: var(--text-sm);
            color: var(--text-muted);
        }

        .card-badge {
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: 500;
            white-space: nowrap;
        }

        .badge-residential {
            background: rgba(22, 163, 74, 0.1);
            color: var(--residential);
        }

        .badge-commercial {
            background: rgba(139, 92, 246, 0.1);
            color: var(--commercial);
        }

        .badge-rental {
            background: rgba(8, 145, 178, 0.1);
            color: var(--rental);
        }

        .badge-referral {
            background: rgba(245, 158, 11, 0.1);
            color: var(--referral);
        }

        .badge-universal {
            background: rgba(107, 114, 128, 0.1);
            color: var(--universal);
        }

        .card-content {
            margin-bottom: var(--space-4);
        }

        .card-meta {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--text-sm);
            color: var(--text-muted);
        }

        .meta-icon {
            width: 14px;
            height: 14px;
            color: var(--text-light);
        }

        .card-actions {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--border-light);
        }

        /* =================== */
        /* BUTTONS & CONTROLS  */
        /* =================== */

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-6);
            font-size: var(--text-sm);
            font-weight: 500;
            border: 1px solid transparent;
            border-radius: var(--radius-base);
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--primary);
            border-color: var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-outline {
            background: transparent;
            color: var(--text-muted);
            border-color: var(--border);
        }

        .btn-outline:hover {
            background: var(--surface-overlay);
            color: var(--text);
        }

        .btn-ghost {
            background: none;
            color: var(--text-muted);
            border: none;
            padding: var(--space-2) var(--space-4);
        }

        .btn-ghost:hover {
            background: var(--surface-overlay);
            color: var(--text);
        }

        .btn-small {
            padding: var(--space-2) var(--space-4);
            font-size: var(--text-xs);
        }

        .btn-large {
            padding: var(--space-4) var(--space-8);
            font-size: var(--text-base);
        }

        .btn-icon {
            width: 20px;
            height: 20px;
        }

        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            background: var(--surface-overlay);
            border: 1px solid var(--border);
            border-radius: var(--radius-base);
            cursor: pointer;
            font-size: var(--text-sm);
            color: var(--text-muted);
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: var(--surface-elevated);
            color: var(--text);
        }

        /* ==================== */
        /* CLAUSE FILTER SYSTEM */
        /* ==================== */

        .clause-filters {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
        }

        .clause-filter-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-4);
        }

        .clause-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-3);
            margin-bottom: var(--space-4);
        }

        .category-filter {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .category-filter input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
        }

        .category-filter label {
            font-size: var(--text-sm);
            color: var(--text-muted);
            cursor: pointer;
        }

        .clause-search {
            width: 100%;
            padding: var(--space-3) var(--space-4);
            border: 1px solid var(--border);
            border-radius: var(--radius-base);
            background: var(--surface);
            color: var(--text);
            font-size: var(--text-sm);
            margin-bottom: var(--space-4);
        }

        .clause-sort {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .clause-item {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-4);
            box-shadow: var(--shadow-base);
        }

        .clause-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-4);
            gap: var(--space-4);
        }

        .clause-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text);
        }

        .clause-category-badge {
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: 500;
            background: var(--surface-overlay);
            color: var(--text-muted);
        }

        .clause-text {
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            font-size: var(--text-sm);
            line-height: 1.6;
            color: var(--text);
            background: var(--surface-elevated);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-base);
            padding: var(--space-4);
            margin: var(--space-4) 0;
            white-space: pre-wrap;
        }

        .clause-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--border-light);
        }

        .clause-meta-item {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }

        .clause-meta-label {
            font-size: var(--text-xs);
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
        }

        .clause-meta-value {
            font-size: var(--text-sm);
            color: var(--text-muted);
        }

        /* =================== */
        /* RESPONSIVE DESIGN   */
        /* =================== */

        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-height: none;
            }

            .filter-row {
                grid-template-columns: 1fr;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-content {
                flex-direction: column;
                gap: var(--space-4);
                align-items: stretch;
            }

            .nav-actions {
                justify-content: center;
            }

            .content-area {
                padding: var(--space-4);
            }

            .filter-toolbar {
                padding: var(--space-4);
            }

            .card {
                padding: var(--space-4);
            }
        }

        /* =================== */
        /* UTILITY CLASSES     */
        /* =================== */

        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .font-mono { font-family: 'SF Mono', 'Monaco', 'Consolas', monospace; }
        .text-success { color: var(--success); }
        .text-warning { color: var(--warning); }
        .text-danger { color: var(--danger); }
        .text-info { color: var(--info); }

        .mb-0 { margin-bottom: 0 !important; }
        .mb-2 { margin-bottom: var(--space-2) !important; }
        .mb-4 { margin-bottom: var(--space-4) !important; }
        .mb-6 { margin-bottom: var(--space-6) !important; }

        .mt-0 { margin-top: 0 !important; }
        .mt-4 { margin-top: var(--space-4) !important; }
        .mt-6 { margin-top: var(--space-6) !important; }

        /* =================== */
        /* LOADING STATES      */
        /* =================== */

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-8);
            color: var(--text-muted);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: var(--space-2);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* =================== */
        /* PRINT STYLES        */
        /* =================== */

        @media print {
            .top-nav,
            .sidebar,
            .filter-toolbar,
            .clause-filters,
            .btn,
            .theme-toggle,
            .view-toggle,
            .nav-actions {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
                font-size: 11pt;
                line-height: 1.4;
            }

            .app-container {
                display: block;
            }

            .main-content {
                display: block;
                max-width: none;
            }

            .content-area {
                padding: 0;
            }

            .card {
                border: 1px solid #333 !important;
                box-shadow: none !important;
                page-break-inside: avoid;
                margin-bottom: 15pt;
                background: white !important;
            }

            .card-title {
                font-size: 13pt !important;
                font-weight: bold !important;
                color: black !important;
            }

            @page {
                margin: 1.5cm;
                @bottom-center {
                    content: "Page " counter(page);
                    font-size: 9pt;
                    color: #666;
                }
            }

            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- TOP NAVIGATION -->
        <nav class="top-nav">
            <div class="nav-content">
                <div class="nav-brand">
                    <div>
                        <h1>Ontario Real Estate Professional Platform</h1>
                        <p>Advanced Edition | Complete Jump Realty Integration | Advanced Filtering</p>
                    </div>
                </div>
                <div class="nav-actions">
                    <div class="search-container">
                        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="text" class="search-input" placeholder="Search forms, clauses, or templates..." id="global-search">
                    </div>
                    <button class="theme-toggle" id="theme-toggle">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <span>Dark</span>
                    </button>
                </div>
            </div>
        </nav>

        <div class="main-content">
            <!-- SIDEBAR -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Navigation</h3>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <button class="nav-link active" data-view="dashboard">
                                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                                Dashboard
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-view="forms">
                                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                Forms Library
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-view="clauses">
                                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m-6 8h6m6 0a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v16a2 2 0 002 2h12z"></path>
                                </svg>
                                Clauses Library
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-view="transaction-builder">
                                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                                Transaction Builder
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-view="compliance">
                                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Compliance Check
                            </button>
                        </li>
                    </ul>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Quick Stats</h3>
                    <div class="stats">
                        <div class="stat-item">
                            <div style="font-size: var(--text-xs); color: var(--text-light); margin-bottom: var(--space-1);">Total Templates</div>
                            <div style="font-size: var(--text-xl); font-weight: 700; color: var(--primary);">12</div>
                        </div>
                        <div class="stat-item">
                            <div style="font-size: var(--text-xs); color: var(--text-light); margin-bottom: var(--space-1);">Ontario Forms</div>
                            <div style="font-size: var(--text-xl); font-weight: 700; color: var(--residential);">95+</div>
                        </div>
                        <div class="stat-item">
                            <div style="font-size: var(--text-xs); color: var(--text-light); margin-bottom: var(--space-1);">Legal Clauses</div>
                            <div style="font-size: var(--text-xl); font-weight: 700; color: var(--commercial);">25+</div>
                        </div>
                        <div class="stat-item">
                            <div style="font-size: var(--text-xs); color: var(--text-light); margin-bottom: var(--space-1);">Compliance</div>
                            <div style="font-size: var(--text-xl); font-weight: 700; color: var(--success);">100%</div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- MAIN CONTENT -->
            <main class="content-area">
                <!-- DASHBOARD VIEW -->
                <div id="dashboard-view" class="view-content">
                    <h2 style="font-size: var(--text-2xl); font-weight: 700; color: var(--text); margin-bottom: var(--space-6);">Platform Dashboard</h2>

                    <div class="content-grid">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Universal Mandatory Forms</h3>
                                    <p class="card-subtitle">Required for all Ontario real estate transactions</p>
                                </div>
                                <div class="card-badge badge-universal">6 Forms</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        RECO/FINTRAC/PIPEDA Compliant
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Required before all services
                                    </div>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="showView('forms')">View Forms</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Residential Transactions</h3>
                                    <p class="card-subtitle">Buyer & seller residential forms</p>
                                </div>
                                <div class="card-badge badge-residential">25 Forms</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                        </svg>
                                        Houses, condos, townhomes
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                        </svg>
                                        Buyer & seller representation
                                    </div>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="filterByCategory('residential')">View Forms</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Commercial Transactions</h3>
                                    <p class="card-subtitle">Commercial property & business sales</p>
                                </div>
                                <div class="card-badge badge-commercial">16 Forms</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                        </svg>
                                        Office, retail, industrial
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                        Due diligence & financing
                                    </div>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="filterByCategory('commercial')">View Forms</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Rental & Lease</h3>
                                    <p class="card-subtitle">Tenant & landlord representation</p>
                                </div>
                                <div class="card-badge badge-rental">10 Forms</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                                        </svg>
                                        RTA compliant standard lease
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                        </svg>
                                        Tenant & landlord protection
                                    </div>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="filterByCategory('rental')">View Forms</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Referral Agreements</h3>
                                    <p class="card-subtitle">Domestic & international referrals</p>
                                </div>
                                <div class="card-badge badge-referral">3 Forms</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                                        </svg>
                                        Cross-border transactions
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                                        </svg>
                                        Fee sharing agreements
                                    </div>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="filterByCategory('referral')">View Forms</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Legal Clauses Library</h3>
                                    <p class="card-subtitle">Professional legal clauses</p>
                                </div>
                                <div class="card-badge badge-commercial">25+ Clauses</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m-6 8h6m6 0a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v16a2 2 0 002 2h12z"></path>
                                        </svg>
                                        Copy-ready legal text
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                                        </svg>
                                        Categorized & filterable
                                    </div>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="showView('clauses')">Browse Clauses</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FORMS VIEW -->
                <div id="forms-view" class="view-content hidden">
                    <div class="filter-toolbar">
                        <div class="filter-row">
                            <div class="filter-group">
                                <label class="filter-label">Category</label>
                                <select class="filter-select" id="category-filter">
                                    <option value="">All Categories</option>
                                    <option value="universal">Universal Forms</option>
                                    <option value="residential">Residential</option>
                                    <option value="commercial">Commercial</option>
                                    <option value="rental">Rental/Lease</option>
                                    <option value="referral">Referral</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Transaction Type</label>
                                <select class="filter-select" id="transaction-filter">
                                    <option value="">All Transactions</option>
                                    <option value="buyer">Buyer Representation</option>
                                    <option value="seller">Seller/Listing</option>
                                    <option value="landlord">Landlord</option>
                                    <option value="tenant">Tenant</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Compliance</label>
                                <select class="filter-select" id="compliance-filter">
                                    <option value="">All Forms</option>
                                    <option value="reco">RECO Required</option>
                                    <option value="fintrac">FINTRAC Required</option>
                                    <option value="rta">RTA Required</option>
                                    <option value="orea">OREA Forms</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Search Forms</label>
                                <input type="text" class="filter-input" placeholder="Search by name or number..." id="forms-search">
                            </div>
                            <div class="filter-actions">
                                <button class="btn btn-outline" onclick="clearFilters()">Clear Filters</button>
                                <button class="btn btn-primary" onclick="applyFilters()">Apply Filters</button>
                            </div>
                        </div>
                        <div class="active-filters" id="active-filters">
                            <!-- Active filters will be displayed here -->
                        </div>
                    </div>

                    <div class="results-header">
                        <div class="results-count" id="forms-count">Loading forms...</div>
                        <div class="view-toggle">
                            <button class="active" onclick="setFormsView('grid')">Grid</button>
                            <button onclick="setFormsView('list')">List</button>
                            <button onclick="setFormsView('table')">Table</button>
                        </div>
                    </div>

                    <div id="forms-content" class="content-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            Loading forms...
                        </div>
                    </div>
                </div>

                <!-- CLAUSES VIEW -->
                <div id="clauses-view" class="view-content hidden">
                    <div class="clause-filters">
                        <h3 class="clause-filter-title">Filter Clauses</h3>

                        <div class="clause-categories">
                            <div class="category-filter">
                                <input type="checkbox" id="cat-financing" value="financing">
                                <label for="cat-financing">Financing</label>
                            </div>
                            <div class="category-filter">
                                <input type="checkbox" id="cat-inspection" value="inspection">
                                <label for="cat-inspection">Inspection</label>
                            </div>
                            <div class="category-filter">
                                <input type="checkbox" id="cat-insurance" value="insurance">
                                <label for="cat-insurance">Insurance</label>
                            </div>
                            <div class="category-filter">
                                <input type="checkbox" id="cat-commercial" value="commercial">
                                <label for="cat-commercial">Commercial</label>
                            </div>
                            <div class="category-filter">
                                <input type="checkbox" id="cat-rental" value="rental">
                                <label for="cat-rental">Rental</label>
                            </div>
                            <div class="category-filter">
                                <input type="checkbox" id="cat-seller" value="seller">
                                <label for="cat-seller">Seller</label>
                            </div>
                            <div class="category-filter">
                                <input type="checkbox" id="cat-referral" value="referral">
                                <label for="cat-referral">Referral</label>
                            </div>
                        </div>

                        <input type="text" class="clause-search" placeholder="Search clauses by name or content..." id="clause-search">

                        <div class="clause-sort">
                            <label>Sort by:</label>
                            <select class="filter-select" id="clause-sort">
                                <option value="name">Name</option>
                                <option value="category">Category</option>
                                <option value="relevance">Relevance</option>
                            </select>
                            <button class="btn btn-outline" onclick="clearClauseFilters()">Clear All</button>
                        </div>
                    </div>

                    <div class="results-header">
                        <div class="results-count" id="clauses-count">Loading clauses...</div>
                        <div class="view-toggle">
                            <button class="active">List View</button>
                        </div>
                    </div>

                    <div id="clauses-content" class="content-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Loading clauses...
                        </div>
                    </div>
                </div>

                <!-- TRANSACTION BUILDER VIEW -->
                <div id="transaction-builder-view" class="view-content hidden">
                    <h2 style="font-size: var(--text-2xl); font-weight: 700; color: var(--text); margin-bottom: var(--space-6);">Transaction Builder</h2>
                    <p style="color: var(--text-muted); margin-bottom: var(--space-8);">Build a complete transaction package with smart form recommendations and compliance checking.</p>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <h3 class="card-title">Transaction Setup</h3>
                                <p class="card-subtitle">Configure your transaction parameters</p>
                            </div>
                        </div>
                        <div class="card-content">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-6);">
                                <div class="filter-group">
                                    <label class="filter-label">Transaction Type</label>
                                    <select class="filter-select" id="builder-transaction-type">
                                        <option value="">Select transaction type</option>
                                        <option value="buyer-residential">Buyer - Residential</option>
                                        <option value="buyer-commercial">Buyer - Commercial</option>
                                        <option value="seller-residential">Seller - Residential</option>
                                        <option value="seller-commercial">Seller - Commercial</option>
                                        <option value="tenant">Tenant Representation</option>
                                        <option value="landlord">Landlord Representation</option>
                                        <option value="referral">Referral Agreement</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">Property Type</label>
                                    <select class="filter-select" id="builder-property-type">
                                        <option value="">Select property type</option>
                                        <option value="detached">Detached House</option>
                                        <option value="semi">Semi-detached</option>
                                        <option value="townhouse">Townhouse</option>
                                        <option value="condo">Condominium</option>
                                        <option value="commercial">Commercial Building</option>
                                        <option value="industrial">Industrial</option>
                                        <option value="retail">Retail Space</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">Client Type</label>
                                    <select class="filter-select" id="builder-client-type">
                                        <option value="">Select client type</option>
                                        <option value="individual">Individual</option>
                                        <option value="corporate">Corporation</option>
                                        <option value="partnership">Partnership</option>
                                        <option value="trust">Trust</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-primary" onclick="buildTransaction()">Generate Transaction Package</button>
                            <button class="btn btn-outline" onclick="resetBuilder()">Reset</button>
                        </div>
                    </div>

                    <div id="transaction-results" class="hidden">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">Generated Transaction Package</h3>
                                    <p class="card-subtitle">Your custom form package and compliance checklist</p>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="transaction-package-content">
                                    <!-- Generated package will appear here -->
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" onclick="printTransaction()">Print Package</button>
                                <button class="btn btn-secondary" onclick="exportTransaction()">Export Package</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- COMPLIANCE VIEW -->
                <div id="compliance-view" class="view-content hidden">
                    <h2 style="font-size: var(--text-2xl); font-weight: 700; color: var(--text); margin-bottom: var(--space-6);">Compliance Check</h2>
                    <p style="color: var(--text-muted); margin-bottom: var(--space-8);">Verify your transaction meets all Ontario regulatory requirements.</p>

                    <div class="content-grid">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">RECO Compliance</h3>
                                    <p class="card-subtitle">Real Estate Council of Ontario requirements</p>
                                </div>
                                <div class="card-badge text-success"> Compliant</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        TRESA Act compliance verified
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Consumer protection forms included
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">FINTRAC Compliance</h3>
                                    <p class="card-subtitle">Financial intelligence requirements</p>
                                </div>
                                <div class="card-badge text-success"> Compliant</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Client identification verified
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Receipt of funds tracking
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">RTA Compliance</h3>
                                    <p class="card-subtitle">Residential Tenancies Act requirements</p>
                                </div>
                                <div class="card-badge text-success"> Compliant</div>
                            </div>
                            <div class="card-content">
                                <div class="card-meta">
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Standard lease forms included
                                    </div>
                                    <div class="meta-item">
                                        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Tenant rights protected
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // ================================================
        // REDESIGNED PLATFORM WITH ADVANCED FILTERING
        // ================================================

        class AdvancedRealEstatePlatform {
            constructor() {
                this.currentView = 'dashboard';
                this.formsData = this.getFormsDatabase();
                this.clausesData = this.getClausesDatabase();
                this.activeFilters = new Set();
                this.currentFormsView = 'grid';
                this.filteredForms = [];
                this.filteredClauses = [];

                this.init();
            }

            init() {
                console.log(' Initializing Advanced Platform...');
                this.setupEventListeners();
                this.setupTheme();
                this.loadInitialData();
                console.log(' Advanced Platform initialized');
            }

            // EVENT LISTENERS
            setupEventListeners() {
                // Navigation
                document.querySelectorAll('[data-view]').forEach(link => {
                    link.addEventListener('click', (e) => {
                        const view = e.target.closest('[data-view]').dataset.view;
                        this.showView(view);
                    });
                });

                // Search
                document.getElementById('global-search').addEventListener('input', (e) => {
                    this.globalSearch(e.target.value);
                });

                // Forms filters
                document.getElementById('category-filter').addEventListener('change', this.applyFilters.bind(this));
                document.getElementById('transaction-filter').addEventListener('change', this.applyFilters.bind(this));
                document.getElementById('compliance-filter').addEventListener('change', this.applyFilters.bind(this));
                document.getElementById('forms-search').addEventListener('input', this.applyFilters.bind(this));

                // Clause filters
                document.querySelectorAll('.category-filter input').forEach(checkbox => {
                    checkbox.addEventListener('change', this.applyClauseFilters.bind(this));
                });
                document.getElementById('clause-search').addEventListener('input', this.applyClauseFilters.bind(this));
                document.getElementById('clause-sort').addEventListener('change', this.applyClauseFilters.bind(this));

                console.log(' Event listeners setup complete');
            }

            setupTheme() {
                const toggle = document.getElementById('theme-toggle');
                const currentTheme = localStorage.getItem('theme') || 'light';

                document.documentElement.setAttribute('data-theme', currentTheme);
                this.updateThemeUI(currentTheme);

                toggle.addEventListener('click', () => {
                    const newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    this.updateThemeUI(newTheme);
                });
            }

            updateThemeUI(theme) {
                const themeText = document.querySelector('.theme-toggle span');
                themeText.textContent = theme === 'dark' ? 'Light' : 'Dark';
            }

            // NAVIGATION
            showView(viewName) {
                console.log(` Showing view: ${viewName}`);

                // Hide all views
                document.querySelectorAll('.view-content').forEach(view => {
                    view.classList.add('hidden');
                });

                // Show target view
                document.getElementById(`${viewName}-view`).classList.remove('hidden');

                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-view="${viewName}"]`).classList.add('active');

                this.currentView = viewName;

                // Load view-specific data
                this.loadViewData(viewName);
            }

            loadViewData(viewName) {
                switch(viewName) {
                    case 'forms':
                        this.loadFormsData();
                        break;
                    case 'clauses':
                        this.loadClausesData();
                        break;
                    case 'transaction-builder':
                        this.loadTransactionBuilder();
                        break;
                    case 'compliance':
                        this.loadComplianceData();
                        break;
                }
            }

            loadInitialData() {
                this.filteredForms = Object.values(this.formsData).flat();
                this.filteredClauses = Object.values(this.clausesData);
            }

            // FORMS MANAGEMENT
            loadFormsData() {
                console.log(' Loading forms data...');
                this.applyFilters();
            }

            applyFilters() {
                const category = document.getElementById('category-filter').value;
                const transaction = document.getElementById('transaction-filter').value;
                const compliance = document.getElementById('compliance-filter').value;
                const search = document.getElementById('forms-search').value.toLowerCase();

                let forms = Object.values(this.formsData).flat();

                // Apply filters
                if (category) {
                    forms = forms.filter(form => form.category === category);
                }

                if (transaction) {
                    forms = forms.filter(form => form.transaction_type === transaction);
                }

                if (compliance) {
                    forms = forms.filter(form => form.compliance.toLowerCase().includes(compliance));
                }

                if (search) {
                    forms = forms.filter(form => 
                        form.name.toLowerCase().includes(search) ||
                        form.number.toLowerCase().includes(search) ||
                        form.purpose.toLowerCase().includes(search)
                    );
                }

                this.filteredForms = forms;
                this.updateFormsCount();
                this.renderForms();
                this.updateActiveFilters();

                console.log(` Applied filters: ${forms.length} forms found`);
            }

            updateFormsCount() {
                const countElement = document.getElementById('forms-count');
                countElement.textContent = `${this.filteredForms.length} forms found`;
            }

            renderForms() {
                const container = document.getElementById('forms-content');

                if (this.filteredForms.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: var(--space-12); color: var(--text-muted);">
                            <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-bottom: var(--space-4);">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <h3>No forms found</h3>
                            <p>Try adjusting your filters or search terms</p>
                        </div>
                    `;
                    return;
                }

                if (this.currentFormsView === 'grid') {
                    container.className = 'content-grid';
                    container.innerHTML = this.filteredForms.map(form => this.renderFormCard(form)).join('');
                } else if (this.currentFormsView === 'list') {
                    container.className = 'content-list';
                    container.innerHTML = this.filteredForms.map(form => this.renderFormListItem(form)).join('');
                } else {
                    container.className = 'content-table';
                    container.innerHTML = this.renderFormsTable(this.filteredForms);
                }
            }

            renderFormCard(form) {
                const categoryBadge = this.getCategoryBadge(form.category);
                return `
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <h3 class="card-title">${form.name}</h3>
                                <p class="card-subtitle">${form.number}</p>
                            </div>
                            <div class="card-badge ${categoryBadge}">${form.category}</div>
                        </div>
                        <div class="card-content">
                            <p style="margin-bottom: var(--space-4); color: var(--text-muted); font-size: var(--text-sm);">${form.purpose}</p>
                            <div class="card-meta">
                                <div class="meta-item">
                                    <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    ${form.timing}
                                </div>
                                <div class="meta-item">
                                    <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    ${form.compliance}
                                </div>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-primary btn-small" onclick="viewFormDetails('${form.id}')">View Details</button>
                            <button class="btn btn-outline btn-small" onclick="addToPackage('${form.id}')">Add to Package</button>
                        </div>
                    </div>
                `;
            }

            renderFormListItem(form) {
                const categoryBadge = this.getCategoryBadge(form.category);
                return `
                    <div class="card" style="padding: var(--space-4);">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: var(--space-4);">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-2);">
                                    <h3 class="card-title" style="margin: 0;">${form.name}</h3>
                                    <div class="card-badge ${categoryBadge}">${form.category}</div>
                                </div>
                                <p class="card-subtitle" style="margin-bottom: var(--space-2);">${form.number}</p>
                                <p style="color: var(--text-muted); font-size: var(--text-sm); margin-bottom: var(--space-2);">${form.purpose}</p>
                                <div style="display: flex; gap: var(--space-4); font-size: var(--text-xs); color: var(--text-light);">
                                    <span>Required: ${form.timing}</span>
                                    <span></span>
                                    <span>${form.compliance}</span>
                                </div>
                            </div>
                            <div style="display: flex; gap: var(--space-2);">
                                <button class="btn btn-primary btn-small" onclick="viewFormDetails('${form.id}')">View</button>
                                <button class="btn btn-outline btn-small" onclick="addToPackage('${form.id}')">Add</button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderFormsTable(forms) {
                return `
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Form Name</th>
                                <th>Number</th>
                                <th>Category</th>
                                <th>Purpose</th>
                                <th>Compliance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${forms.map(form => `
                                <tr>
                                    <td><strong>${form.name}</strong></td>
                                    <td>${form.number}</td>
                                    <td><span class="card-badge ${this.getCategoryBadge(form.category)}">${form.category}</span></td>
                                    <td style="max-width: 300px;">${form.purpose}</td>
                                    <td>${form.compliance}</td>
                                    <td>
                                        <button class="btn btn-ghost btn-small" onclick="viewFormDetails('${form.id}')">View</button>
                                        <button class="btn btn-ghost btn-small" onclick="addToPackage('${form.id}')">Add</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }

            getCategoryBadge(category) {
                const badges = {
                    'universal': 'badge-universal',
                    'residential': 'badge-residential',
                    'commercial': 'badge-commercial',
                    'rental': 'badge-rental',
                    'referral': 'badge-referral'
                };
                return badges[category] || 'badge-universal';
            }

            setFormsView(view) {
                console.log(` Setting forms view to: ${view}`);
                this.currentFormsView = view;

                // Update view toggle buttons
                document.querySelectorAll('.view-toggle button').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');

                this.renderForms();
            }

            // CLAUSES MANAGEMENT
            loadClausesData() {
                console.log(' Loading clauses data...');
                this.applyClauseFilters();
            }

            applyClauseFilters() {
                const search = document.getElementById('clause-search').value.toLowerCase();
                const sort = document.getElementById('clause-sort').value;
                const categories = Array.from(document.querySelectorAll('.category-filter input:checked'))
                    .map(input => input.value);

                let clauses = [...this.clausesData];

                // Apply category filter
                if (categories.length > 0) {
                    clauses = clauses.filter(clause => categories.includes(clause.category.toLowerCase()));
                }

                // Apply search filter
                if (search) {
                    clauses = clauses.filter(clause => 
                        clause.name.toLowerCase().includes(search) ||
                        clause.text.toLowerCase().includes(search) ||
                        clause.purpose.toLowerCase().includes(search)
                    );
                }

                // Apply sorting
                clauses.sort((a, b) => {
                    switch(sort) {
                        case 'name':
                            return a.name.localeCompare(b.name);
                        case 'category':
                            return a.category.localeCompare(b.category);
                        default:
                            return 0;
                    }
                });

                this.filteredClauses = clauses;
                this.updateClausesCount();
                this.renderClauses();

                console.log(` Applied clause filters: ${clauses.length} clauses found`);
            }

            updateClausesCount() {
                const countElement = document.getElementById('clauses-count');
                countElement.textContent = `${this.filteredClauses.length} clauses found`;
            }

            renderClauses() {
                const container = document.getElementById('clauses-content');

                if (this.filteredClauses.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: var(--space-12); color: var(--text-muted);">
                            <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-bottom: var(--space-4);">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m-6 8h6m6 0a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v16a2 2 0 002 2h12z"></path>
                            </svg>
                            <h3>No clauses found</h3>
                            <p>Try adjusting your filters or search terms</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.filteredClauses.map(clause => this.renderClauseItem(clause)).join('');
            }

            renderClauseItem(clause) {
                return `
                    <div class="clause-item">
                        <div class="clause-header">
                            <h3 class="clause-title">${clause.name}</h3>
                            <div style="display: flex; gap: var(--space-2); align-items: center;">
                                <div class="clause-category-badge">${clause.category}</div>
                                <button class="btn btn-primary btn-small" onclick="copyClause('${clause.id}')">Copy</button>
                            </div>
                        </div>
                        <textarea class="clause-text" readonly id="clause-${clause.id}">${clause.text}</textarea>
                        <div class="clause-meta">
                            <div class="clause-meta-item">
                                <div class="clause-meta-label">Purpose</div>
                                <div class="clause-meta-value">${clause.purpose}</div>
                            </div>
                            <div class="clause-meta-item">
                                <div class="clause-meta-label">When to Use</div>
                                <div class="clause-meta-value">${clause.when_to_use}</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // FILTER MANAGEMENT
            updateActiveFilters() {
                const container = document.getElementById('active-filters');
                const filters = [];

                const category = document.getElementById('category-filter').value;
                const transaction = document.getElementById('transaction-filter').value;
                const compliance = document.getElementById('compliance-filter').value;
                const search = document.getElementById('forms-search').value;

                if (category) filters.push({ type: 'category', value: category, label: `Category: ${category}` });
                if (transaction) filters.push({ type: 'transaction', value: transaction, label: `Transaction: ${transaction}` });
                if (compliance) filters.push({ type: 'compliance', value: compliance, label: `Compliance: ${compliance}` });
                if (search) filters.push({ type: 'search', value: search, label: `Search: "${search}"` });

                if (filters.length === 0) {
                    container.innerHTML = '';
                    return;
                }

                container.innerHTML = filters.map(filter => `
                    <div class="filter-tag">
                        ${filter.label}
                        <button class="filter-tag-remove" onclick="platform.removeFilter('${filter.type}')" title="Remove filter">
                            <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                `).join('');
            }

            removeFilter(type) {
                switch(type) {
                    case 'category':
                        document.getElementById('category-filter').value = '';
                        break;
                    case 'transaction':
                        document.getElementById('transaction-filter').value = '';
                        break;
                    case 'compliance':
                        document.getElementById('compliance-filter').value = '';
                        break;
                    case 'search':
                        document.getElementById('forms-search').value = '';
                        break;
                }
                this.applyFilters();
            }

            clearFilters() {
                document.getElementById('category-filter').value = '';
                document.getElementById('transaction-filter').value = '';
                document.getElementById('compliance-filter').value = '';
                document.getElementById('forms-search').value = '';
                this.applyFilters();
            }

            clearClauseFilters() {
                document.getElementById('clause-search').value = '';
                document.getElementById('clause-sort').value = 'name';
                document.querySelectorAll('.category-filter input').forEach(input => input.checked = false);
                this.applyClauseFilters();
            }

            // SEARCH
            globalSearch(query) {
                console.log(` Global search: ${query}`);

                if (!query) return;

                // Auto-switch to forms view and search
                if (this.currentView !== 'forms') {
                    this.showView('forms');
                }

                document.getElementById('forms-search').value = query;
                this.applyFilters();
            }

            filterByCategory(category) {
                this.showView('forms');
                document.getElementById('category-filter').value = category;
                this.applyFilters();
            }

            // TRANSACTION BUILDER
            loadTransactionBuilder() {
                console.log(' Loading transaction builder...');
            }

            buildTransaction() {
                const transactionType = document.getElementById('builder-transaction-type').value;
                const propertyType = document.getElementById('builder-property-type').value;
                const clientType = document.getElementById('builder-client-type').value;

                if (!transactionType) {
                    alert('Please select a transaction type');
                    return;
                }

                console.log(' Building transaction package...');

                // Generate package based on selections
                const packageContent = this.generateTransactionPackage(transactionType, propertyType, clientType);

                document.getElementById('transaction-package-content').innerHTML = packageContent;
                document.getElementById('transaction-results').classList.remove('hidden');
            }

            generateTransactionPackage(transactionType, propertyType, clientType) {
                return `
                    <div style="margin-bottom: var(--space-6);">
                        <h4 style="color: var(--primary); margin-bottom: var(--space-4);">Transaction Summary</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-4); margin-bottom: var(--space-6);">
                            <div>
                                <strong>Transaction Type:</strong><br>
                                <span style="color: var(--text-muted);">${transactionType}</span>
                            </div>
                            <div>
                                <strong>Property Type:</strong><br>
                                <span style="color: var(--text-muted);">${propertyType || 'Not specified'}</span>
                            </div>
                            <div>
                                <strong>Client Type:</strong><br>
                                <span style="color: var(--text-muted);">${clientType || 'Individual'}</span>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: var(--space-6);">
                        <h4 style="color: var(--primary); margin-bottom: var(--space-4);">Required Forms</h4>
                        <div class="content-list">
                            <div class="card">
                                <div style="padding: var(--space-4);">
                                    <h5>Primary Agreement Form</h5>
                                    <p style="color: var(--text-muted);">Main transaction document</p>
                                </div>
                            </div>
                            <div class="card">
                                <div style="padding: var(--space-4);">
                                    <h5>Representation Agreement</h5>
                                    <p style="color: var(--text-muted);">Client representation documentation</p>
                                </div>
                            </div>
                            <div class="card">
                                <div style="padding: var(--space-4);">
                                    <h5>Disclosure Forms</h5>
                                    <p style="color: var(--text-muted);">Required disclosure documentation</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="color: var(--primary); margin-bottom: var(--space-4);">Compliance Checklist</h4>
                        <div style="display: flex; flex-direction: column; gap: var(--space-2);">
                            <label style="display: flex; align-items: center; gap: var(--space-2);">
                                <input type="checkbox" checked disabled>
                                RECO Information Guide provided
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--space-2);">
                                <input type="checkbox" checked disabled>
                                Client identification verified (FINTRAC)
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--space-2);">
                                <input type="checkbox" checked disabled>
                                Privacy policy disclosed (PIPEDA)
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--space-2);">
                                <input type="checkbox">
                                Representation agreement signed
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--space-2);">
                                <input type="checkbox">
                                All disclosures completed
                            </label>
                        </div>
                    </div>
                `;
            }

            resetBuilder() {
                document.getElementById('builder-transaction-type').value = '';
                document.getElementById('builder-property-type').value = '';
                document.getElementById('builder-client-type').value = '';
                document.getElementById('transaction-results').classList.add('hidden');
            }

            // COMPLIANCE
            loadComplianceData() {
                console.log(' Loading compliance data...');
            }

            // UTILITY FUNCTIONS
            copyClause(clauseId) {
                const textarea = document.getElementById(`clause-${clauseId}`);
                textarea.select();
                document.execCommand('copy');
                this.showToast('Clause copied to clipboard!');
            }

            printTransaction() {
                window.print();
            }

            exportTransaction() {
                this.showToast('Transaction package exported!');
            }

            showToast(message) {
                // Simple toast implementation
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: var(--success);
                    color: white;
                    padding: 12px 24px;
                    border-radius: 8px;
                    box-shadow: var(--shadow-lg);
                    z-index: 1000;
                    font-size: 14px;
                    font-weight: 500;
                `;
                toast.textContent = message;
                document.body.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }

            // DATA SOURCES
            getFormsDatabase() {
                return {
                    universal: [
                        {
                            id: 'reco-guide',
                            name: 'RECO Information Guide',
                            number: 'RECO Guide',
                            category: 'universal',
                            transaction_type: 'all',
                            purpose: 'Consumer protection - explains rights, duties, and expectations',
                            timing: 'Before any services or assistance are provided',
                            compliance: 'RECO/TRESA requirement'
                        },
                        {
                            id: 'privacy-policy',
                            name: 'Jump Realty - Privacy Policy',
                            number: 'PIPEDA Form',
                            category: 'universal',
                            transaction_type: 'all',
                            purpose: 'Informs clients how personal information is collected and used',
                            timing: 'Before collecting any personal information',
                            compliance: 'PIPEDA requirement'
                        },
                        {
                            id: 'fintrac-individual',
                            name: 'FINTRAC Individual Identification Record',
                            number: 'Ontario Form 630',
                            category: 'universal',
                            transaction_type: 'all',
                            purpose: 'Anti-money laundering compliance for individual clients',
                            timing: 'Before offer acceptance',
                            compliance: 'FINTRAC/PCMLTFA requirement'
                        }
                    ],
                    residential: [
                        {
                            id: 'agreement-residential',
                            name: 'Agreement of Purchase and Sale - Residential',
                            number: 'Ontario Form 100',
                            category: 'residential',
                            transaction_type: 'buyer',
                            purpose: 'Primary residential purchase agreement',
                            timing: 'For all residential transactions',
                            compliance: 'OREA/RECO requirement'
                        },
                        {
                            id: 'buyer-representation',
                            name: 'Buyer Designated Representation Agreement',
                            number: 'Ontario Form 371',
                            category: 'residential',
                            transaction_type: 'buyer',
                            purpose: 'Establishes buyer representation relationship',
                            timing: 'Before providing buyer services',
                            compliance: 'RECO/TRESA requirement'
                        },
                        {
                            id: 'listing-agreement',
                            name: 'Listing Agreement - Seller Representation',
                            number: 'Ontario Form 271',
                            category: 'residential',
                            transaction_type: 'seller',
                            purpose: 'Establishes listing representation relationship',
                            timing: 'Before marketing any property',
                            compliance: 'RECO/TRESA requirement'
                        }
                    ],
                    commercial: [
                        {
                            id: 'agreement-commercial',
                            name: 'Agreement of Purchase and Sale - Commercial',
                            number: 'Ontario Form 500',
                            category: 'commercial',
                            transaction_type: 'buyer',
                            purpose: 'Primary commercial purchase agreement',
                            timing: 'For all commercial transactions',
                            compliance: 'OREA/RECO requirement'
                        },
                        {
                            id: 'commercial-buyer-rep',
                            name: 'Commercial Buyer Representation Agreement',
                            number: 'Ontario Form 596',
                            category: 'commercial',
                            transaction_type: 'buyer',
                            purpose: 'Establishes commercial buyer representation',
                            timing: 'Before providing commercial services',
                            compliance: 'RECO/TRESA requirement'
                        }
                    ],
                    rental: [
                        {
                            id: 'standard-lease',
                            name: 'Ontario Standard Lease Agreement',
                            number: 'Ontario Form 2229E',
                            category: 'rental',
                            transaction_type: 'landlord',
                            purpose: 'Mandatory lease form for residential tenancies',
                            timing: 'For all new residential leases',
                            compliance: 'RTA s.12.1 requirement'
                        },
                        {
                            id: 'tenant-representation',
                            name: 'Tenant Representation Agreement',
                            number: 'Ontario Form 372',
                            category: 'rental',
                            transaction_type: 'tenant',
                            purpose: 'Tenant representation agreement',
                            timing: 'Before providing tenant services',
                            compliance: 'RECO/TRESA requirement'
                        }
                    ],
                    referral: [
                        {
                            id: 'referral-agreement',
                            name: 'Referral Agreement',
                            number: 'Ontario Form 641',
                            category: 'referral',
                            transaction_type: 'referral',
                            purpose: 'Documents referral arrangements and fee sharing',
                            timing: 'When making or receiving referrals',
                            compliance: 'RECO/TRESA referral requirement'
                        }
                    ]
                };
            }

            getClausesDatabase() {
                return [
                    {
                        id: 'mortgage-condition',
                        name: 'Condition - Arranging a New Mortgage',
                        category: 'Financing',
                        text: 'This Offer is conditional upon the Buyer arranging, at the Buyer's own expense, a new mortgage for not less than $_______, bearing interest at a rate of not more than ___% per annum, calculated semi-annually not in advance, for a term of not less than ___ year(s), repayable in blended monthly payments. Unless the Buyer gives notice in writing not later than ___ p.m. on _______, 20__, that this condition is fulfilled, this Offer shall be null and void.',
                        purpose: 'Protects buyer if unable to secure required mortgage financing',
                        when_to_use: 'All residential purchases requiring mortgage financing'
                    },
                    {
                        id: 'home-inspection',
                        name: 'Condition - Home Inspector',
                        category: 'Inspection',
                        text: 'This Offer is conditional upon the Buyer obtaining, at the Buyer's own expense, a home inspection of the property and all buildings and structures thereon and the Buyer obtaining a report satisfactory to the Buyer in the Buyer's sole and absolute discretion. Unless the Buyer gives notice in writing not later than ___ p.m. on _______, 20__, that this condition is fulfilled, this Offer shall be null and void.',
                        purpose: 'Allows professional inspection to identify defects before closing',
                        when_to_use: 'All residential property purchases'
                    },
                    {
                        id: 'insurance-condition',
                        name: 'Condition - Arranging Insurance',
                        category: 'Insurance',
                        text: 'This Offer is conditional upon the Buyer obtaining, at the Buyer's expense, satisfactory insurance coverage for the property. Unless the Buyer gives notice in writing not later than ___ p.m. on _______, 20__, that this condition is fulfilled, this Offer shall be null and void.',
                        purpose: 'Ensures buyer can obtain property insurance before closing',
                        when_to_use: 'All property purchases'
                    },
                    {
                        id: 'commercial-due-diligence',
                        name: 'Commercial Due Diligence Period',
                        category: 'Commercial',
                        text: 'This Offer is conditional upon the Buyer completing due diligence investigations to the Buyer's sole satisfaction, including but not limited to: financial review of operating statements, lease reviews, environmental assessments, zoning compliance verification, and any other investigations deemed necessary by the Buyer.',
                        purpose: 'Allows comprehensive commercial property investigation before closing',
                        when_to_use: 'All commercial property purchases'
                    },
                    {
                        id: 'rent-increase',
                        name: 'Rent Increase Notice Clause',
                        category: 'Rental',
                        text: 'The Landlord may increase the rent for the rental unit in accordance with the Residential Tenancies Act. Any rent increase requires 90 days written notice on the prescribed form (Form N1). The rent increase cannot exceed the guideline amount set by the Ontario government unless the Landlord obtains approval from the Landlord and Tenant Board.',
                        purpose: 'Ensures compliance with RTA rent increase requirements',
                        when_to_use: 'All residential lease agreements'
                    },
                    {
                        id: 'property-disclosure',
                        name: 'Property Condition Disclosure Clause',
                        category: 'Seller',
                        text: 'The Seller warrants that to the best of the Seller's knowledge and belief, the property is free from material latent defects except as disclosed in the Seller Property Information Statement. The Seller agrees to promptly disclose any material changes to the property condition that occur between acceptance and closing.',
                        purpose: 'Establishes seller disclosure obligations',
                        when_to_use: 'All residential and commercial listings'
                    },
                    {
                        id: 'referral-fee',
                        name: 'Referral Fee Arrangement Clause',
                        category: 'Referral',
                        text: 'The referring brokerage shall receive a referral fee of ___% of the gross commission earned by the receiving brokerage, payable upon successful completion of the transaction. This fee is in consideration for the initial client introduction and shall be paid regardless of the level of ongoing involvement by the referring party.',
                        purpose: 'Establishes clear referral fee arrangements',
                        when_to_use: 'All referral agreements'
                    }
                ];
            }
        }

        // Global functions for onclick handlers
        function showView(view) {
            platform.showView(view);
        }

        function filterByCategory(category) {
            platform.filterByCategory(category);
        }

        function clearFilters() {
            platform.clearFilters();
        }

        function clearClauseFilters() {
            platform.clearClauseFilters();
        }

        function setFormsView(view) {
            platform.setFormsView(view);
        }

        function viewFormDetails(formId) {
            platform.showToast('Form details view - Feature coming soon!');
        }

        function addToPackage(formId) {
            platform.showToast('Form added to package!');
        }

        function copyClause(clauseId) {
            platform.copyClause(clauseId);
        }

        function buildTransaction() {
            platform.buildTransaction();
        }

        function resetBuilder() {
            platform.resetBuilder();
        }

        function printTransaction() {
            platform.printTransaction();
        }

        function exportTransaction() {
            platform.exportTransaction();
        }

        // Initialize platform
        const platform = new AdvancedRealEstatePlatform();

        // Log completion
        console.log(' Advanced Platform with Filtering fully loaded!');
        console.log(' Features: Advanced filtering, clause filtering, transaction builder');
        console.log(' Views: Dashboard, Forms, Clauses, Transaction Builder, Compliance');
        console.log(' UI: Modern design, responsive layout, dark/light themes');
    </script>
</body>
</html>
